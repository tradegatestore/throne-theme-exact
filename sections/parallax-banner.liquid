<div class="parallax-banner" data-section-id="{{ section.id }}">
  <div class="parallax-banner__slides" data-parallax="true">
    {%- for block in section.blocks -%}
      <div class="parallax-banner__slide" {{ block.shopify_attributes }}>
        <div class="parallax-banner__image-wrapper">
          {%- if block.settings.image != blank -%}
            <img src="{{ block.settings.image | image_url: width: 1920 }}" 
                 alt="{{ block.settings.image.alt | escape }}" 
                 class="parallax-banner__image" loading="lazy">
          {%- else -%}
            <div class="parallax-banner__placeholder">
              {{ 'lifestyle-1' | placeholder_svg_tag: 'placeholder-svg' }}
            </div>
          {%- endif -%}
        </div>
        <div class="parallax-banner__content">
          <div class="parallax-banner__inner">
            {%- if block.settings.category != blank -%}
              <span class="parallax-banner__category">{{ block.settings.category }}</span>
            {%- endif -%}
            {%- if block.settings.heading != blank -%}
              <h2 class="parallax-banner__heading">{{ block.settings.heading }}</h2>
            {%- endif -%}
            {%- if block.settings.button_label != blank -%}
              <a href="{{ block.settings.button_link }}" class="parallax-banner__button btn">
                {{ block.settings.button_label }}
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
              </a>
            {%- endif -%}
          </div>
        </div>
      </div>
    {%- endfor -%}
  </div>
  <div class="parallax-banner__nav">
    {%- for block in section.blocks -%}
      <button class="parallax-banner__dot{% if forloop.first %} active{% endif %}" data-slide="{{ forloop.index0 }}">
        <span class="visually-hidden">Slide {{ forloop.index }}</span>
      </button>
    {%- endfor -%}
  </div>
</div>

<style>
.parallax-banner { position: relative; height: 100vh; min-height: 600px; overflow: hidden; }
.parallax-banner__slides { position: relative; height: 100%; }
.parallax-banner__slide { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; transition: opacity 0.8s ease; }
.parallax-banner__slide:first-child { opacity: 1; }
.parallax-banner__slide.active { opacity: 1; z-index: 1; }
.parallax-banner__image-wrapper { position: absolute; top: 0; left: 0; width: 100%; height: 120%; }
.parallax-banner__image { width: 100%; height: 100%; object-fit: cover; transform: translateY(0); transition: transform 0.1s ease-out; }
.parallax-banner__content { position: absolute; bottom: 0; left: 0; right: 0; padding: 60px; background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, transparent 100%); }
.parallax-banner__inner { max-width: 600px; }
.parallax-banner__category { display: inline-block; padding: 8px 16px; background: var(--color-accent, #c8f542); color: #000; font-size: 12px; font-weight: 700; text-transform: uppercase; letter-spacing: 2px; border-radius: 4px; margin-bottom: 20px; }
.parallax-banner__heading { font-size: clamp(2rem, 5vw, 3.5rem); font-weight: 700; color: #fff; margin: 0 0 30px; line-height: 1.2; }
.parallax-banner__button { display: inline-flex; align-items: center; gap: 10px; padding: 16px 32px; background: var(--color-accent, #c8f542); color: #000; font-weight: 600; text-decoration: none; border-radius: 50px; transition: all 0.3s ease; }
.parallax-banner__button:hover { transform: translateX(5px); box-shadow: 0 10px 30px rgba(200,245,66,0.3); }
.parallax-banner__nav { position: absolute; bottom: 30px; right: 30px; display: flex; gap: 10px; z-index: 10; }
.parallax-banner__dot { width: 12px; height: 12px; border-radius: 50%; background: rgba(255,255,255,0.3); border: none; cursor: pointer; transition: all 0.3s ease; }
.parallax-banner__dot.active { background: var(--color-accent, #c8f542); transform: scale(1.2); }
@media (max-width: 768px) { .parallax-banner { min-height: 500px; } .parallax-banner__content { padding: 30px; } }
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const banner = document.querySelector('.parallax-banner');
  if (!banner) return;
  const image = banner.querySelector('.parallax-banner__image');
  if (image && banner.dataset.parallax === 'true') {
    window.addEventListener('scroll', function() {
      const rect = banner.getBoundingClientRect();
      if (rect.top < window.innerHeight && rect.bottom > 0) {
        const scrolled = (window.innerHeight - rect.top) / (window.innerHeight + rect.height);
        image.style.transform = 'translateY(' + (scrolled * 50) + 'px)';
      }
    });
  }
});
</script>

{% schema %}
{
  "name": "Parallax Banner",
  "tag": "section",
  "class": "parallax-banner-section",
  "settings": [
    {
      "type": "checkbox",
      "id": "enable_parallax",
      "label": "Enable Parallax Effect",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "banner",
      "name": "Banner Slide",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Background Image"
        },
        {
          "type": "text",
          "id": "category",
          "label": "Category Label",
          "default": "Earbuds"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Enjoy seamless audio anytime, anywhere"
        },
        {
          "type": "text",
          "id": "button_label",
          "label": "Button Label",
          "default": "Shop Collection"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button Link"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Parallax Banner",
      "blocks": [
        { "type": "banner" }
      ]
    }
  ]
}
{% endschema %}
