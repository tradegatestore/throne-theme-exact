{% comment %}
  Video Hero Section - Premium fullscreen video with overlay content
{% endcomment %}

{%- style -%}
  #shopify-section-{{ section.id }} {
    --video-height: {{ section.settings.video_height }}vh;
    --overlay-opacity: {{ section.settings.overlay_opacity | divided_by: 100.0 }};
    --content-width: {{ section.settings.content_width }}px;
  }
{%- endstyle -%}

<section class="video-hero video-hero--{{ section.settings.content_position }}"
  data-section-id="{{ section.id }}"
  data-section-type="video-hero">
  
  <div class="video-hero__media-wrapper">
    {%- if section.settings.video_url != blank -%}
      <div class="video-hero__video-container">
        {%- if section.settings.video_url.type == 'youtube' -%}
          <iframe
            src="https://www.youtube.com/embed/{{ section.settings.video_url.id }}?autoplay=1&mute=1&loop=1&playlist={{ section.settings.video_url.id }}&controls=0&showinfo=0&rel=0&playsinline=1"
            class="video-hero__video video-hero__video--youtube"
            allow="autoplay; encrypted-media"
            allowfullscreen
            loading="lazy">
          </iframe>
        {%- elsif section.settings.video_url.type == 'vimeo' -%}
          <iframe
            src="https://player.vimeo.com/video/{{ section.settings.video_url.id }}?autoplay=1&loop=1&muted=1&background=1"
            class="video-hero__video video-hero__video--vimeo"
            allow="autoplay; encrypted-media"
            allowfullscreen
            loading="lazy">
          </iframe>
        {%- endif -%}
      </div>
    {%- elsif section.settings.video_file != blank -%}
      <video
        class="video-hero__video video-hero__video--native"
        autoplay muted loop playsinline
        poster="{{ section.settings.cover_image | image_url: width: 1920 }}">
        <source src="{{ section.settings.video_file.sources[1].url }}" type="video/mp4">
      </video>
    {%- else -%}
      {%- if section.settings.cover_image != blank -%}
        <div class="video-hero__image">
          {{ section.settings.cover_image | image_url: width: 1920 | image_tag:
            loading: 'eager',
            sizes: '100vw',
            widths: '375, 750, 1100, 1500, 1920',
            class: 'video-hero__cover-image'
          }}
        </div>
      {%- else -%}
        <div class="video-hero__placeholder">
          {{ 'lifestyle-2' | placeholder_svg_tag: 'placeholder-svg' }}
        </div>
      {%- endif -%}
    {%- endif -%}
    <div class="video-hero__overlay"></div>
  </div>
  
  <div class="video-hero__content-wrapper page-width">
    <div class="video-hero__content content-container--{{ section.settings.text_alignment }}">
      {%- if section.settings.subheading != blank -%}
        <span class="video-hero__subheading subheading animate-el" data-animate="fade-up">
          {{ section.settings.subheading }}
        </span>
      {%- endif -%}
      
      {%- if section.settings.heading != blank -%}
        <h1 class="video-hero__heading {{ section.settings.heading_size }} animate-el" data-animate="fade-up">
          {{ section.settings.heading }}
        </h1>
      {%- endif -%}
      
      {%- if section.settings.text != blank -%}
        <div class="video-hero__text rte animate-el" data-animate="fade-up">
          {{ section.settings.text }}
        </div>
      {%- endif -%}
      
      {%- if section.settings.button_label != blank -%}
        <div class="video-hero__buttons animate-el" data-animate="fade-up">
          <a href="{{ section.settings.button_link }}" class="button button--{{ section.settings.button_style }}">
            {{ section.settings.button_label }}
          </a>
          {%- if section.settings.button_label_2 != blank -%}
            <a href="{{ section.settings.button_link_2 }}" class="button button--{{ section.settings.button_style_2 }}">
              {{ section.settings.button_label_2 }}
            </a>
          {%- endif -%}
        </div>
      {%- endif -%}
    </div>
  </div>
  
  {%- if section.settings.show_scroll_indicator -%}
    <div class="video-hero__scroll-indicator">
      <span>Scroll</span>
      <div class="video-hero__scroll-line"></div>
    </div>
  {%- endif -%}
</section>

{% schema %}
{
  "name": "Video Hero",
  "tag": "section",
  "class": "section-video-hero",
  "settings": [
    {
      "type": "header",
      "content": "Media"
    },
    {
      "type": "video_url",
      "id": "video_url",
      "label": "Video URL",
      "accept": ["youtube", "vimeo"]
    },
    {
      "type": "video",
      "id": "video_file",
      "label": "Video file"
    },
    {
      "type": "image_picker",
      "id": "cover_image",
      "label": "Cover image"
    },
    {
      "type": "range",
      "id": "video_height",
      "label": "Video height",
      "min": 50,
      "max": 100,
      "step": 5,
      "default": 100,
      "unit": "vh"
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "label": "Overlay opacity",
      "min": 0,
      "max": 80,
      "step": 5,
      "default": 30,
      "unit": "%"
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Video Hero"
    },
    {
      "type": "select",
      "id": "heading_size",
      "label": "Heading size",
      "options": [
        { "value": "h2", "label": "Small" },
        { "value": "h1", "label": "Medium" },
        { "value": "h0", "label": "Large" }
      ],
      "default": "h0"
    },
    {
      "type": "richtext",
      "id": "text",
      "label": "Text"
    },
    {
      "type": "select",
      "id": "content_position",
      "label": "Content position",
      "options": [
        { "value": "top-left", "label": "Top left" },
        { "value": "top-center", "label": "Top center" },
        { "value": "middle-left", "label": "Middle left" },
        { "value": "middle-center", "label": "Middle center" },
        { "value": "middle-right", "label": "Middle right" },
        { "value": "bottom-left", "label": "Bottom left" },
        { "value": "bottom-center", "label": "Bottom center" }
      ],
      "default": "middle-center"
    },
    {
      "type": "select",
      "id": "text_alignment",
      "label": "Text alignment",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ],
      "default": "center"
    },
    {
      "type": "range",
      "id": "content_width",
      "label": "Content max width",
      "min": 400,
      "max": 1000,
      "step": 50,
      "default": 700,
      "unit": "px"
    },
    {
      "type": "header",
      "content": "Primary Button"
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button label",
      "default": "Shop Now"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button link"
    },
    {
      "type": "select",
      "id": "button_style",
      "label": "Button style",
      "options": [
        { "value": "primary", "label": "Primary" },
        { "value": "secondary", "label": "Secondary" },
        { "value": "outline-light", "label": "Outline Light" }
      ],
      "default": "primary"
    },
    {
      "type": "header",
      "content": "Secondary Button"
    },
    {
      "type": "text",
      "id": "button_label_2",
      "label": "Button label"
    },
    {
      "type": "url",
      "id": "button_link_2",
      "label": "Button link"
    },
    {
      "type": "select",
      "id": "button_style_2",
      "label": "Button style",
      "options": [
        { "value": "primary", "label": "Primary" },
        { "value": "secondary", "label": "Secondary" },
        { "value": "outline-light", "label": "Outline Light" }
      ],
      "default": "outline-light"
    },
    {
      "type": "checkbox",
      "id": "show_scroll_indicator",
      "label": "Show scroll indicator",
      "default": true
    }
  ],
  "presets": [
    {
      "name": "Video Hero"
    }
  ]
}
{% endschema %}
