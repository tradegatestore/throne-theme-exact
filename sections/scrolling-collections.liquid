<div class="scrolling-collections" data-section-id="{{ section.id }}">
  <div class="scrolling-collections__header page-width">
    {%- if section.settings.heading != blank -%}
      <h2 class="scrolling-collections__heading">{{ section.settings.heading }}</h2>
    {%- endif -%}
  </div>
  <div class="scrolling-collections__track" data-speed="{{ section.settings.speed }}">
    <div class="scrolling-collections__inner">
      {%- for block in section.blocks -%}
        <a href="{{ block.settings.collection.url | default: '#' }}" class="scrolling-collections__item" {{ block.shopify_attributes }}>
          <div class="scrolling-collections__image-wrapper">
            {%- if block.settings.image != blank -%}
              <img src="{{ block.settings.image | image_url: width: 400 }}" alt="{{ block.settings.image.alt | escape }}" class="scrolling-collections__image" loading="lazy">
            {%- elsif block.settings.collection.image -%}
              <img src="{{ block.settings.collection.image | image_url: width: 400 }}" alt="{{ block.settings.collection.title }}" class="scrolling-collections__image" loading="lazy">
            {%- else -%}
              {{ 'collection-1' | placeholder_svg_tag: 'placeholder-svg' }}
            {%- endif -%}
          </div>
          <span class="scrolling-collections__title">{{ block.settings.collection.title | default: block.settings.title | default: 'Collection' }}</span>
        </a>
      {%- endfor -%}
      {%- for block in section.blocks -%}
        <a href="{{ block.settings.collection.url | default: '#' }}" class="scrolling-collections__item" aria-hidden="true">
          <div class="scrolling-collections__image-wrapper">
            {%- if block.settings.image != blank -%}
              <img src="{{ block.settings.image | image_url: width: 400 }}" alt="" class="scrolling-collections__image" loading="lazy">
            {%- elsif block.settings.collection.image -%}
              <img src="{{ block.settings.collection.image | image_url: width: 400 }}" alt="" class="scrolling-collections__image" loading="lazy">
            {%- else -%}
              {{ 'collection-1' | placeholder_svg_tag: 'placeholder-svg' }}
            {%- endif -%}
          </div>
          <span class="scrolling-collections__title">{{ block.settings.collection.title | default: block.settings.title | default: 'Collection' }}</span>
        </a>
      {%- endfor -%}
    </div>
  </div>
</div>

<style>
.scrolling-collections { padding: 80px 0; overflow: hidden; }
.scrolling-collections__header { text-align: center; margin-bottom: 50px; }
.scrolling-collections__heading { font-size: clamp(2rem, 4vw, 3rem); font-weight: 700; margin: 0; }
.scrolling-collections__track { width: 100%; overflow: hidden; }
.scrolling-collections__inner { display: flex; gap: 30px; animation: scroll-collections 30s linear infinite; width: max-content; }
.scrolling-collections__item { display: flex; flex-direction: column; align-items: center; gap: 15px; text-decoration: none; color: inherit; flex-shrink: 0; transition: transform 0.3s ease; }
.scrolling-collections__item:hover { transform: scale(1.05); }
.scrolling-collections__image-wrapper { width: 150px; height: 150px; border-radius: 50%; overflow: hidden; border: 3px solid var(--color-accent, #c8f542); }
.scrolling-collections__image { width: 100%; height: 100%; object-fit: cover; transition: transform 0.4s ease; }
.scrolling-collections__item:hover .scrolling-collections__image { transform: scale(1.1); }
.scrolling-collections__title { font-size: 1rem; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; }
@keyframes scroll-collections { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
.scrolling-collections__track:hover .scrolling-collections__inner { animation-play-state: paused; }
</style>

{% schema %}
{
  "name": "Scrolling Collections",
  "tag": "section",
  "class": "scrolling-collections-section",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "Shop by Category" },
    { "type": "range", "id": "speed", "label": "Scroll Speed (seconds)", "min": 15, "max": 60, "step": 5, "default": 30 }
  ],
  "blocks": [
    {
      "type": "collection",
      "name": "Collection",
      "settings": [
        { "type": "collection", "id": "collection", "label": "Collection" },
        { "type": "text", "id": "title", "label": "Custom Title" },
        { "type": "image_picker", "id": "image", "label": "Custom Image" }
      ]
    }
  ],
  "presets": [{ "name": "Scrolling Collections", "blocks": [{ "type": "collection" }, { "type": "collection" }, { "type": "collection" }, { "type": "collection" }] }]
}
{% endschema %}
