{{ 'section-split-banner.css' | asset_url | stylesheet_tag }}

<section class="split-banner section-{{ section.id }} {% if section.settings.reverse_layout %}split-banner--reversed{% endif %}" data-section-id="{{ section.id }}">
  <div class="split-banner__container">
    <div class="split-banner__media" data-scroll-reveal data-parallax="true">
      {% if section.settings.image %}
        <img 
          src="{{ section.settings.image | img_url: '1600x' }}"
          alt="{{ section.settings.image.alt | escape }}"
          class="split-banner__image"
          loading="lazy"
        >
      {% elsif section.settings.video_url != blank %}
        <video class="split-banner__video" autoplay muted loop playsinline>
          <source src="{{ section.settings.video_url }}" type="video/mp4">
        </video>
      {% else %}
        {{ 'lifestyle-2' | placeholder_svg_tag: 'split-banner__placeholder' }}
      {% endif %}
    </div>
    
    <div class="split-banner__content" data-scroll-reveal>
      <div class="split-banner__content-inner">
        {% if section.settings.subtitle != blank %}
          <span class="split-banner__subtitle" data-reveal-text>{{ section.settings.subtitle }}</span>
        {% endif %}
        
        {% if section.settings.heading != blank %}
          <h2 class="split-banner__title h0" data-reveal-text data-delay="100">{{ section.settings.heading }}</h2>
        {% endif %}
        
        {% if section.settings.text != blank %}
          <div class="split-banner__text" data-reveal-text data-delay="200">
            {{ section.settings.text }}
          </div>
        {% endif %}
        
        {% if section.settings.button_label != blank %}
          <div class="split-banner__actions" data-reveal-text data-delay="300">
            <a 
              href="{{ section.settings.button_link }}" 
              class="split-banner__button button button--{{ section.settings.button_style }}"
            >
              {{ section.settings.button_label }}
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>
            </a>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</section>

<style>
  .split-banner { min-height: 100vh; overflow: hidden; }
  .split-banner__container { display: grid; grid-template-columns: 1fr 1fr; min-height: 100vh; }
  .split-banner--reversed .split-banner__container { direction: rtl; }
  .split-banner--reversed .split-banner__container > * { direction: ltr; }
  .split-banner__media { position: relative; overflow: hidden; opacity: 0; transform: scale(1.1); transition: all 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94); }
  .split-banner__media.is-visible { opacity: 1; transform: scale(1); }
  .split-banner__image, .split-banner__video { width: 100%; height: 100%; object-fit: cover; will-change: transform; }
  .split-banner__content { display: flex; align-items: center; padding: 80px; background: var(--color-background); opacity: 0; transform: translateX(50px); transition: all 1s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.3s; }
  .split-banner--reversed .split-banner__content { transform: translateX(-50px); }
  .split-banner__content.is-visible { opacity: 1; transform: translateX(0); }
  .split-banner__content-inner { max-width: 550px; }
  .split-banner__subtitle { display: inline-block; font-size: 0.85rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.15em; color: var(--color-accent, #c8f542); margin-bottom: 20px; opacity: 0; transform: translateY(20px); transition: all 0.6s ease; }
  .split-banner__subtitle.is-visible { opacity: 1; transform: translateY(0); }
  .split-banner__title { font-size: clamp(2.5rem, 5vw, 4.5rem); line-height: 1.1; margin: 0 0 25px; letter-spacing: -0.03em; opacity: 0; transform: translateY(30px); transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94); }
  .split-banner__title.is-visible { opacity: 1; transform: translateY(0); }
  .split-banner__text { font-size: 1.15rem; line-height: 1.7; color: var(--color-text-muted, #666); margin-bottom: 35px; opacity: 0; transform: translateY(20px); transition: all 0.6s ease; }
  .split-banner__text.is-visible { opacity: 1; transform: translateY(0); }
  .split-banner__actions { opacity: 0; transform: translateY(20px); transition: all 0.6s ease; }
  .split-banner__actions.is-visible { opacity: 1; transform: translateY(0); }
  .split-banner__button { display: inline-flex; align-items: center; gap: 12px; padding: 18px 35px; font-weight: 600; text-decoration: none; transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94); }
  .split-banner__button.button--primary { background: var(--color-text); color: var(--color-background); border: none; }
  .split-banner__button.button--primary:hover { background: var(--color-accent, #c8f542); color: #000; transform: translateY(-3px); }
  .split-banner__button.button--secondary { background: transparent; color: var(--color-text); border: 2px solid currentColor; }
  .split-banner__button.button--secondary:hover { background: var(--color-text); color: var(--color-background); }
  .split-banner__placeholder { width: 100%; height: 100%; background: var(--color-card-bg, #f0f0f0); }
  @media (max-width: 1024px) { .split-banner__content { padding: 60px 40px; } .split-banner__title { font-size: clamp(2rem, 4vw, 3rem); } }
  @media (max-width: 768px) { .split-banner__container { grid-template-columns: 1fr; } .split-banner__media { min-height: 50vh; } .split-banner__content { padding: 50px 25px; } .split-banner--reversed .split-banner__container { direction: ltr; } .split-banner { min-height: auto; } }
</style>

<script>
  (function() {
    const section = document.querySelector('.section-{{ section.id }}');
    if (!section) return;
    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const delay = entry.target.dataset.delay || 0;
          setTimeout(() => entry.target.classList.add('is-visible'), delay);
        }
      });
    }, { threshold: 0.2 });
    
    section.querySelectorAll('[data-scroll-reveal], [data-reveal-text]').forEach(el => observer.observe(el));
    
    const media = section.querySelector('[data-parallax]');
    if (media) {
      window.addEventListener('scroll', () => {
        const rect = section.getBoundingClientRect();
        const scrolled = window.innerHeight - rect.top;
        const parallaxAmount = scrolled * 0.15;
        if (rect.top < window.innerHeight && rect.bottom > 0) {
          media.querySelector('.split-banner__image, .split-banner__video')?.style.setProperty('transform', `translateY(${parallaxAmount}px)`);
        }
      }, { passive: true });
    }
  })();
</script>

{% schema %}
{
  "name": "Split Banner",
  "tag": "section",
  "class": "section-split-banner",
  "settings": [
    { "type": "image_picker", "id": "image", "label": "Image" },
    { "type": "text", "id": "video_url", "label": "Video URL (MP4)", "info": "Used if no image is selected" },
    { "type": "text", "id": "subtitle", "label": "Subtitle", "default": "New Collection" },
    { "type": "text", "id": "heading", "label": "Heading", "default": "Discover the Art of Modern Living" },
    { "type": "richtext", "id": "text", "label": "Text", "default": "<p>Explore our curated collection designed for those who appreciate refined aesthetics.</p>" },
    { "type": "text", "id": "button_label", "label": "Button label", "default": "Explore Collection" },
    { "type": "url", "id": "button_link", "label": "Button link" },
    { "type": "select", "id": "button_style", "label": "Button style", "options": [{"value": "primary", "label": "Primary"}, {"value": "secondary", "label": "Secondary"}], "default": "primary" },
    { "type": "checkbox", "id": "reverse_layout", "label": "Reverse layout", "default": false }
  ],
  "presets": [{ "name": "Split Banner" }]
}
{% endschema %}
