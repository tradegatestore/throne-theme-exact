{% comment %}
  Rich Text Section - Text content with formatting options
{% endcomment %}

{%- style -%}
  #shopify-section-{{ section.id }} {
    padding-top: {{ section.settings.padding_top }}px;
    padding-bottom: {{ section.settings.padding_bottom }}px;
    background-color: {{ section.settings.background_color }};
    color: {{ section.settings.text_color }};
  }
{%- endstyle -%}

<section class="rich-text rich-text--{{ section.settings.layout }}" data-section-id="{{ section.id }}">
  <div class="{% if section.settings.full_width %}page-width--full{% else %}page-width{% endif %}">
    <div class="rich-text__content content-container--{{ section.settings.text_alignment }}" style="max-width: {{ section.settings.content_width }}px; margin: 0 auto;">
      {%- for block in section.blocks -%}
        {%- case block.type -%}
          {%- when 'subheading' -%}
            <span class="rich-text__subheading subheading" {{ block.shopify_attributes }}>{{ block.settings.text }}</span>
          {%- when 'heading' -%}
            <h2 class="rich-text__heading {{ block.settings.heading_size }}" {{ block.shopify_attributes }}>{{ block.settings.heading }}</h2>
          {%- when 'text' -%}
            <div class="rich-text__text rte" {{ block.shopify_attributes }}>{{ block.settings.text }}</div>
          {%- when 'button' -%}
            <div class="rich-text__button" {{ block.shopify_attributes }}>
              <a href="{{ block.settings.button_link }}" class="button button--{{ block.settings.button_style }}">
                {{ block.settings.button_label }}
              </a>
            </div>
        {%- endcase -%}
      {%- endfor -%}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Rich Text",
  "tag": "section",
  "class": "section-rich-text",
  "settings": [
    {
      "type": "select",
      "id": "layout",
      "label": "Layout",
      "options": [
        { "value": "contained", "label": "Contained" },
        { "value": "full", "label": "Full width" }
      ],
      "default": "contained"
    },
    {
      "type": "checkbox",
      "id": "full_width",
      "label": "Full width content",
      "default": false
    },
    {
      "type": "range",
      "id": "content_width",
      "label": "Content width",
      "min": 400,
      "max": 1200,
      "step": 50,
      "default": 800,
      "unit": "px"
    },
    {
      "type": "select",
      "id": "text_alignment",
      "label": "Text alignment",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ],
      "default": "center"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Top padding",
      "min": 0,
      "max": 150,
      "step": 5,
      "default": 60,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Bottom padding",
      "min": 0,
      "max": 150,
      "step": 5,
      "default": 60,
      "unit": "px"
    }
  ],
  "blocks": [
    {
      "type": "subheading",
      "name": "Subheading",
      "settings": [
        { "type": "text", "id": "text", "label": "Subheading", "default": "Subheading" }
      ]
    },
    {
      "type": "heading",
      "name": "Heading",
      "settings": [
        { "type": "text", "id": "heading", "label": "Heading", "default": "Talk about your brand" },
        { "type": "select", "id": "heading_size", "label": "Size", "options": [
          { "value": "h3", "label": "Small" },
          { "value": "h2", "label": "Medium" },
          { "value": "h1", "label": "Large" }
        ], "default": "h2" }
      ]
    },
    {
      "type": "text",
      "name": "Text",
      "settings": [
        { "type": "richtext", "id": "text", "label": "Text", "default": "<p>Share your brand story with customers.</p>" }
      ]
    },
    {
      "type": "button",
      "name": "Button",
      "settings": [
        { "type": "text", "id": "button_label", "label": "Button label", "default": "Learn More" },
        { "type": "url", "id": "button_link", "label": "Button link" },
        { "type": "select", "id": "button_style", "label": "Style", "options": [
          { "value": "primary", "label": "Primary" },
          { "value": "secondary", "label": "Secondary" },
          { "value": "outline", "label": "Outline" }
        ], "default": "primary" }
      ]
    }
  ],
  "presets": [
    {
      "name": "Rich Text",
      "blocks": [
        { "type": "subheading" },
        { "type": "heading" },
        { "type": "text" },
        { "type": "button" }
      ]
    }
  ]
}
{% endschema %}
