<div class="reveal-media" data-section-id="{{ section.id }}" data-reveal="true">
  <div class="reveal-media__container">
    <div class="reveal-media__content">
      {%- if section.settings.heading != blank -%}
        <h2 class="reveal-media__heading">{{ section.settings.heading }}</h2>
      {%- endif -%}
      {%- if section.settings.text != blank -%}
        <p class="reveal-media__text">{{ section.settings.text }}</p>
      {%- endif -%}
    </div>
    <div class="reveal-media__media-wrapper">
      {%- if section.settings.video_url != blank -%}
        <div class="reveal-media__video">
          <iframe src="{{ section.settings.video_url }}" frameborder="0" allowfullscreen loading="lazy"></iframe>
        </div>
      {%- elsif section.settings.image != blank -%}
        <img src="{{ section.settings.image | image_url: width: 1200 }}" alt="{{ section.settings.image.alt | escape }}" class="reveal-media__image" loading="lazy">
      {%- else -%}
        {{ 'lifestyle-2' | placeholder_svg_tag: 'placeholder-svg' }}
      {%- endif -%}
    </div>
  </div>
</div>

<style>
.reveal-media { padding: 100px 0; background: var(--color-background); overflow: hidden; }
.reveal-media__container { max-width: 1400px; margin: 0 auto; padding: 0 20px; }
.reveal-media__content { text-align: center; margin-bottom: 60px; opacity: 0; transform: translateY(30px); transition: all 0.8s ease; }
.reveal-media.revealed .reveal-media__content { opacity: 1; transform: translateY(0); }
.reveal-media__heading { font-size: clamp(2rem, 5vw, 3.5rem); font-weight: 700; margin: 0 0 20px; }
.reveal-media__text { font-size: 1.2rem; color: var(--color-text-muted); max-width: 600px; margin: 0 auto; }
.reveal-media__media-wrapper { position: relative; border-radius: 20px; overflow: hidden; opacity: 0; transform: scale(0.95); transition: all 1s ease 0.2s; box-shadow: 0 30px 60px rgba(0,0,0,0.3); }
.reveal-media.revealed .reveal-media__media-wrapper { opacity: 1; transform: scale(1); }
.reveal-media__image { width: 100%; height: auto; display: block; }
.reveal-media__video { position: relative; padding-bottom: 56.25%; height: 0; }
.reveal-media__video iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
@media (max-width: 768px) { .reveal-media { padding: 60px 0; } }
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const revealSections = document.querySelectorAll('[data-reveal="true"]');
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('revealed');
      }
    });
  }, { threshold: 0.2 });
  revealSections.forEach(section => observer.observe(section));
});
</script>

{% schema %}
{
  "name": "Reveal Media",
  "tag": "section",
  "class": "reveal-media-section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Discover Our Story"
    },
    {
      "type": "textarea",
      "id": "text",
      "label": "Text",
      "default": "Experience innovation at its finest"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "text",
      "id": "video_url",
      "label": "Video URL (YouTube/Vimeo embed)"
    }
  ],
  "presets": [
    {
      "name": "Reveal Media"
    }
  ]
}
{% endschema %}
