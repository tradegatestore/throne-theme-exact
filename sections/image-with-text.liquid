{% comment %}
  Image With Text Section - Premium split layout with parallax and animations
{% endcomment %}

{%- style -%}
  #shopify-section-{{ section.id }} {
    --section-padding-top: {{ section.settings.padding_top }}px;
    --section-padding-bottom: {{ section.settings.padding_bottom }}px;
    --content-max-width: {{ section.settings.content_width }}px;
  }
  
  #shopify-section-{{ section.id }} .image-with-text__content {
    background-color: {{ section.settings.content_bg_color }};
    color: {{ section.settings.text_color }};
  }
  
  #shopify-section-{{ section.id }} .image-with-text__heading {
    color: {{ section.settings.heading_color }};
  }
{%- endstyle -%}

<section class="image-with-text image-with-text--{{ section.settings.layout }} image-with-text--{{ section.settings.height }}
  {% if section.settings.enable_parallax %}image-with-text--parallax{% endif %}"
  data-section-id="{{ section.id }}"
  data-section-type="image-with-text">
  
  <div class="image-with-text__container page-width--full">
    <div class="image-with-text__grid grid grid--2-col{% if section.settings.layout == 'image_second' %} grid--reverse{% endif %}">
      
      {%- comment -%} Image Column {%- endcomment -%}
      <div class="image-with-text__media grid__item">
        <div class="media-wrapper{% if section.settings.enable_parallax %} parallax-container{% endif %}">
          {%- if section.settings.image != blank -%}
            <div class="media media--{{ section.settings.image_ratio }}{% if section.settings.enable_parallax %} parallax-media{% endif %}">
              {{ section.settings.image | image_url: width: 1920 | image_tag:
                loading: 'lazy',
                sizes: '(min-width: 750px) 50vw, 100vw',
                widths: '375, 550, 750, 1100, 1500, 1920',
                class: 'image-with-text__image'
              }}
            </div>
          {%- else -%}
            <div class="media media--{{ section.settings.image_ratio }} placeholder-media">
              {{ 'lifestyle-1' | placeholder_svg_tag: 'placeholder-svg' }}
            </div>
          {%- endif -%}
          
          {%- if section.settings.enable_overlay -%}
            <div class="image-with-text__overlay" style="opacity: {{ section.settings.overlay_opacity | divided_by: 100.0 }};"></div>
          {%- endif -%}
        </div>
      </div>
      
      {%- comment -%} Content Column {%- endcomment -%}
      <div class="image-with-text__content grid__item">
        <div class="image-with-text__content-inner content-container content-container--{{ section.settings.content_alignment }}">
          
          {%- if section.settings.subheading != blank -%}
            <span class="image-with-text__subheading subheading animate-element" data-animate="fade-up" data-delay="0">
              {{ section.settings.subheading }}
            </span>
          {%- endif -%}
          
          {%- if section.settings.heading != blank -%}
            <h2 class="image-with-text__heading {{ section.settings.heading_size }} animate-element" data-animate="fade-up" data-delay="100">
              {{ section.settings.heading }}
            </h2>
          {%- endif -%}
          
          {%- if section.settings.text != blank -%}
            <div class="image-with-text__text rte animate-element" data-animate="fade-up" data-delay="200">
              {{ section.settings.text }}
            </div>
          {%- endif -%}
          
          {%- if section.settings.button_label != blank -%}
            <div class="image-with-text__button-wrapper animate-element" data-animate="fade-up" data-delay="300">
              <a href="{{ section.settings.button_link }}" 
                 class="button button--{{ section.settings.button_style }}{% if section.settings.button_style == 'link' %} link-with-icon{% endif %}">
                <span>{{ section.settings.button_label }}</span>
                {%- if section.settings.button_style == 'link' -%}
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 10" fill="none" aria-hidden="true" class="icon icon-arrow">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M8.537.808a.5.5 0 01.817-.162l4 4a.5.5 0 010 .708l-4 4a.5.5 0 11-.708-.708L11.793 5.5H1a.5.5 0 010-1h10.793L8.646 1.354a.5.5 0 01-.109-.546z" fill="currentColor"/>
                  </svg>
                {%- endif -%}
              </a>
            </div>
          {%- endif -%}
          
        </div>
      </div>
      
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Image with Text",
  "tag": "section",
  "class": "section-image-with-text",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "select",
      "id": "image_ratio",
      "label": "Image ratio",
      "options": [
        { "value": "adapt", "label": "Adapt to image" },
        { "value": "portrait", "label": "Portrait" },
        { "value": "square", "label": "Square" },
        { "value": "landscape", "label": "Landscape" }
      ],
      "default": "adapt"
    },
    {
      "type": "select",
      "id": "layout",
      "label": "Layout",
      "options": [
        { "value": "image_first", "label": "Image first" },
        { "value": "image_second", "label": "Image second" }
      ],
      "default": "image_first"
    },
    {
      "type": "select",
      "id": "height",
      "label": "Section height",
      "options": [
        { "value": "small", "label": "Small" },
        { "value": "medium", "label": "Medium" },
        { "value": "large", "label": "Large" },
        { "value": "full", "label": "Full screen" }
      ],
      "default": "medium"
    },
    {
      "type": "checkbox",
      "id": "enable_parallax",
      "label": "Enable parallax effect",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "enable_overlay",
      "label": "Enable image overlay",
      "default": false
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "label": "Overlay opacity",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 30,
      "unit": "%"
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "Craftsmanship"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Designed for Modern Living"
    },
    {
      "type": "select",
      "id": "heading_size",
      "label": "Heading size",
      "options": [
        { "value": "h3", "label": "Small" },
        { "value": "h2", "label": "Medium" },
        { "value": "h1", "label": "Large" },
        { "value": "h0", "label": "Extra large" }
      ],
      "default": "h1"
    },
    {
      "type": "richtext",
      "id": "text",
      "label": "Text",
      "default": "<p>Pair text with an image to focus on your chosen product, collection, or blog post. Add details on availability, style, or even provide a review.</p>"
    },
    {
      "type": "select",
      "id": "content_alignment",
      "label": "Content alignment",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ],
      "default": "left"
    },
    {
      "type": "header",
      "content": "Button"
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button label",
      "default": "Learn More"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button link"
    },
    {
      "type": "select",
      "id": "button_style",
      "label": "Button style",
      "options": [
        { "value": "primary", "label": "Primary" },
        { "value": "secondary", "label": "Secondary" },
        { "value": "outline", "label": "Outline" },
        { "value": "link", "label": "Link with arrow" }
      ],
      "default": "primary"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "content_bg_color",
      "label": "Content background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading color",
      "default": "#1a1a1a"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#4a4a4a"
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Top padding",
      "min": 0,
      "max": 150,
      "step": 5,
      "default": 0,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Bottom padding",
      "min": 0,
      "max": 150,
      "step": 5,
      "default": 0,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "content_width",
      "label": "Content max width",
      "min": 300,
      "max": 700,
      "step": 20,
      "default": 500,
      "unit": "px"
    }
  ],
  "presets": [
    {
      "name": "Image with Text"
    }
  ]
}
{% endschema %}
